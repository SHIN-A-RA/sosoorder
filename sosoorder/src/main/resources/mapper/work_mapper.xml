<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.soso.app.work.mapper.WorkMapper">

<!-- work 조회 -->
   <select id="empNum" parameterType="String" resultType="map">
select e.empName, to_char(w.workstart,'hh24:mi') AS workStart, NVL(to_char(w.workEnd,'hh24:mi'),' ') AS workEnd
  from employees e, work w
  where w.empNum = e.empNum AND storeId =#{storeId}
   </select>

<!--work 시작-->
   <insert id="workStart" parameterType="String">
	INSERT INTO work(workNum,empNum,workStart) values(work_seq.nextval,#{empNum},SYSDATE)
   </insert>
   
   
<!-- work 종료 -->  
   <update id="workEnd" parameterType="String" >
	UPDATE work SET workEnd=SYSDATE where empNum=#{empNum}
   </update>

<!-- 캘린더 work 데이터 -->
	<select id = "getWorkTimeData" resultType="map">
select e.empName, to_char(w.workstart,'YYYY-MM-DD') AS workStart
  from employees e, work w
 where w.empNum = e.empNum 
   AND storeId =#{storeId}
	</select>


</mapper>

